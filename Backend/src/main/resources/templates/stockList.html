<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>KOSPI 주식 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 class="text-center mb-4">📈 KOSPI 주식 목록</h2>
    <table class="table table-hover text-center" id="stock-table">
        <thead>
        <tr>
            <th>종목명</th><th>기준일</th><th>시가</th><th>종가</th><th>고가</th><th>저가</th><th>거래량</th>
        </tr>
        </thead>
        <tbody id="stock-body">
        </tbody>
    </table>
</div>

<script>
    fetch('/stock/api/kospi?page=1')
        .then(response => response.json())
        .then(data => {
            const tbody = document.getElementById('stock-body');
            data.forEach(stock => {
                const row = `
                <tr>
                    <td>${stock.itmsNm}</td>
                    <td>${stock.basDt}</td>
                    <td>${Number(stock.mkp).toLocaleString()}</td>
                    <td>${Number(stock.clpr).toLocaleString()}</td>
                    <td>${Number(stock.hipr).toLocaleString()}</td>
                    <td>${Number(stock.lopr).toLocaleString()}</td>
                    <td>${Number(stock.trqu).toLocaleString()}</td>
                </tr>
                `;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        });
</script>
</body>
</html>